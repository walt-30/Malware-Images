
import pyzipper
import os

zip_password = 'infected'
malware_path = '../../malware/'
malwares = os.listdir(malware_path)

def unzip_file(file):
    with pyzipper.AESZipFile(file) as zf:
        zf.pwd = zip_password
        my_secrets = zf.extractall(".")
        print("Sample \""+file+"\" unpacked.")

# loop through all files in the malware directory unpack them and delete the .zip file
for zip_file in enumerate(malwares):
    unzip_file(zip_file)
    os.remove(zip_file)

print('done')