
import pyzipper
import os

zip_password = b'infected'
malware_path = '../../DataSet/malware/'
malwares = os.listdir(malware_path)

def unzip_file(file):
    try:
        with pyzipper.AESZipFile(file) as zf:
            zf.pwd = zip_password
            my_secrets = zf.extractall(malware_path)
    except:
        print('ERROR: failed to extract: ' + file)

# loop through all files in the malware directory unpack them and delete the .zip file
for counter, file_name in enumerate(malwares):
    print('unzipping ' + file_name)
    unzip_file(malware_path + file_name)
    os.remove(malware_path + file_name)

print('done')
