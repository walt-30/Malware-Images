# https://machinelearningprojects.net/histogram-of-a-grayscale-image/
# pip install opencv-python

import os
import cv2
import matplotlib.pyplot as plt
import numpy as np
from conversion_data import *

images = os.listdir(IMAGE_DIR)

def create_histogram(imageName):
    img = cv2.imread(IMAGE_DIR + imageName,0)
    plt.subplot(1,2,1)
    plt.imshow(img,cmap='gray')
    plt.title(imageName)
    plt.xticks([])
    plt.yticks([])
    plt.subplot(1,2,2)
    hist,bin = np.histogram(img.ravel(),256,[0,255])
    plt.xlim([0,255])
    plt.plot(hist)
    plt.savefig(HIST_DIR + imageName)


for counter, name in enumerate(images):
    print('generating histogram for ' + name)
    create_histogram(name)
print('done')
print('histograms are saved to ' + HIST_DIR)
